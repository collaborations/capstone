%div.row#institution-header
  %div.row
    %div.columns.small-12.large-8
      %h1#institution-name= @institution.name
      %div#address
        %p
          %em= @location.streetLine1
        %p
          %em= @location.streetLine2 if @location.streetLine2.present?
        %p
          %em= @location.city + ", " + @location.state + " " + @location.zip.to_s

    %div.columns.small-12.large-3
      %ul.small-block-grid-6.medium-block-grid-4.large-block-grid-5.amenities-list
        - @institution.amenities.each do |amenity|
          %li
            =embedded_amenity(amenity)


%div.row
  %div#institution-info.columns.small-12.large-9
    %div.row
      %div#institution-details.columns.small-12.large-8
        %div.row
          %h5.columns.small-4.large-3= "Phone:"
          %p.columns.small-8.large-9= getPhone(@id)
        %div.row
          %h5.columns.small-4.large-3= "Website:"
          %p.columns.small-8.large-9= getWebsite(@id)
        = getHours

      %div#google-map-aerial.columns.small-12.large-4
        = loading_spinner()

    %div#google-map-street.row
      = loading_spinner()

    %div#institution-directions-link.row
      = link_to getDirectionsLink(@location) do
        %button= "Get Directions"

    %div#institution-desc.row
      %h4= "Description:"
      %p.description= @institution.desc

    %div#institution-restrictions.row
      %h4= "Restrictions:"
      - @restrictions.each do |r|
        %p.restriction
          %strong= r.name
          = r.desc if r.desc.present?
            

  %div#get-info.columns.small-12.large-2
    %div#save
      %h4= "Save Shelter Information"
      / Only keeping this here until we review which we like more.
      / %div.row
      /   %p.columns.small-6.large-6= embedded_svg("email.svg", { class: "save-icon", alt: "Email me this!"})
      /   %button.small-6.large-6{ name: "email", "data-reveal-id" => "institution-modal" }= "Email"
      / %div.row
      /   %p.columns.small-6.large-6= embedded_svg("sms.svg", { class: "save-icon", alt: "Text this to me!"})
      /   %button.small-6.large-6{ name: "text", "data-reveal-id" => "institution-modal" }= "Text"
      / %div.row
      /   %p.columns.small-6.large-6= embedded_svg("printer.svg", { class: "save-icon", alt: "Print this for me!"})
      /   = link_to("Print", "/institution/" + @id.to_s + "/print", { class: "columns small-6 large-6 button label" })
      / Will want to delete this
      %div.row
        %button.small-12.large-12{ name: "email", "data-reveal-id" => "institution-modal" }
          %div= embedded_svg("email.svg", { class: "save-icon", alt: "Email me this!"})
          %span= "Email"
      %div.row
        %button.small-12.large-12{ name: "text", "data-reveal-id" => "institution-modal" }
          %div= embedded_svg("sms.svg", { class: "save-icon", alt: "Text this to me!"})
          %span= "Text"
      %div.row
        = link_to(institution_print_path(@id), { class: "columns small-12 large-12 button label" }) do
          %div= embedded_svg("printer.svg", { class: "save-icon", alt: "Print this for me!"})
          %span= "Print"

    %div#subscribe    
      %h4= "Subscribe"
      %div.row
        = form_tag('/sms/subscribe', method: :post, data: { :abide => "ajax" }) do
          = telephone_field_tag "number", nil, required: true, pattern: "\\d{10}"
          %small.error= "Please enter your 10 digit phone number (including area code)."
          = hidden_field_tag "id", @institution.id
          = submit_tag "Opt In", { class: "button", id: "opt-in" }
        

= render 'send_info_modal'
